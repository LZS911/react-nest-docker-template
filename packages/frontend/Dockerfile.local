FROM node:16.16.0-alpine
WORKDIR /projects
COPY ./pnpm-lock.yaml ./

RUN npm install -g pnpm@8.3.1
RUN pnpm fetch

COPY . .

RUN pnpm install -r --offline

VOLUME ["/projects/node_modules/", "/projects/packages/frontend/node_modules/", "/projects/.pnpm-store/"]

CMD cd packages/frontend && pnpm start
